<!DOCTYPE HTML>
<html lang="de" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Katalogeinträge erzeugen | GeoServer in action</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-advanced-emoji/emoji-website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-exercises-tmp-fixed-6/exercises.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-expandable-chapters/expandable-chapters.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-image-captions/image-captions.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-richquotes/plugin.css">
        
    
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-sectionx/sectionx.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../rest/edit.html" />
    
    
    <link rel="prev" href="../rest/read.html" />
    

        
    </head>
    <body>
        <script src="../gitbook/plugins/gitbook-plugin-exercises-tmp-fixed-6/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        
    <div class="book"
        data-level="3.2"
        data-chapter-title="Katalogeinträge erzeugen"
        data-filepath="rest/create.md"
        data-basepath=".."
        data-revision="Tue Jun 21 2016 08:03:55 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Einleitung
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="environment/index.html">
            
                
                    <a href="../environment/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Vorarbeiten und generelle Informationen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="basics/index.html">
            
                
                    <a href="../basics/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Basiswissen GeoServer
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="basics/folderstructure.html">
            
                
                    <a href="../basics/folderstructure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Ordnerstruktur des GeoServers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="basics/compilesource.html">
            
                
                    <a href="../basics/compilesource.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Installieren von Erweiterungen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="basics/installextensions.html">
            
                
                    <a href="../basics/installextensions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Kompilieren des Quellcodes mit maven
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="rest/index.html">
            
                
                    <a href="../rest/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        REST-Schnittstelle
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="rest/read.html">
            
                
                    <a href="../rest/read.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Katalog auslesen
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="3.2" data-path="rest/create.html">
            
                
                    <a href="../rest/create.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Katalogeinträge erzeugen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="rest/edit.html">
            
                
                    <a href="../rest/edit.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Katalogeinträge editieren
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="rest/delete.html">
            
                
                    <a href="../rest/delete.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Katalogeinträge entfernen
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="troubleshooting/index.html">
            
                
                    <a href="../troubleshooting/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Tipps, Tricks &amp; Troubleshooting
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="troubleshooting/logging.html">
            
                
                    <a href="../troubleshooting/logging.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Protokollierung
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="troubleshooting/gwc.html">
            
                
                    <a href="../troubleshooting/gwc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Layer cachen mit GWC
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="troubleshooting/datadir.html">
            
                
                    <a href="../troubleshooting/datadir.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        GeoServer-Datenverzeichnis auslagern
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="troubleshooting/gui.html">
            
                
                    <a href="../troubleshooting/gui.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Einstellungen in der GeoServer GUI
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="troubleshooting/jvm.html">
            
                
                    <a href="../troubleshooting/jvm.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Java Virtual Machine (JVM) tunen
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Veröffentlicht mit GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >GeoServer in action</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="katalogeintr&#xE4;ge-erzeugen">Katalogeintr&#xE4;ge erzeugen</h1>
<p>Nachdem wir die REST-API kennengelernt und &#xFC;ber die <code>GET</code>-Operation einige
Informationen unseres GeoServers abgerufen haben, werden wir im n&#xE4;chsten Schritt
einen neuen Arbeitsbereich inklusive eines Datenspeichers und Feature Types &#xFC;ber
REST anlegen.</p>
<h2 id="arbeitsbereich-erstellen">Arbeitsbereich erstellen</h2>
<p>&#xD6;ffnen Sie das Terminal (falls noch nicht geschehen) und geben Sie den folgenden
Befehl zum Erstellen eines neuen Workspaces namens <code>fossgis</code> ein:</p>
<pre><code class="lang-bash">curl \
  -v \
  -u admin:geoserver \
  -XPOST \
  -H <span class="hljs-string">&quot;Content-type: text/xml&quot;</span> \
  <span class="hljs-operator">-d</span> <span class="hljs-string">&quot;&lt;workspace&gt;
        &lt;name&gt;fossgis&lt;/name&gt;
      &lt;/workspace&gt;&quot;</span> \
   {{ book.geoServerBaseUrl }}/rest/workspaces
</code></pre>
<p>Der obige Aufruf unterscheidet sich in zwei wesentlichen Punkten von den bisherigen
Read-Operationen: Wir nutzen f&#xFC;r das Erstellen einer neuen Ressource im Gegensatz
zur HTTP-Operation <code>GET</code> die Operation <code>POST</code> und schicken einen <code>XML</code> Content
<code>&lt;workspace&gt;...&lt;/workspace&gt;</code> an eine eindeutige URL der
REST-API. Die Adresse haben wir durch die bisherigen Schritte identifizieren
k&#xF6;nnen. Nach Aufruf des Befehls sollte im Terminal folgende Ausgabe erscheinen:</p>
<pre><code class="lang-undefined">* Hostname was NOT found in DNS cache
*   Trying 127.0.0.1...
* Connected to localhost (127.0.0.1) port 8082 (#0)
* Server auth using Basic with user &apos;admin&apos;
&gt; POST /geoserver/rest/workspaces HTTP/1.1
&gt; Authorization: Basic YWRtaW46Z2Vvc2VydmVy
&gt; User-Agent: curl/7.35.0
&gt; Host: localhost:8082
&gt; Accept: */*
&gt; Content-type: text/xml
&gt; Content-Length: 69
&gt;
* upload completely sent off: 69 out of 69 bytes
&lt; HTTP/1.1 201 Created
&lt; Date: Tue, 24 Feb 2015 10:03:56 GMT
&lt; Location: {{ book.geoServerBaseUrl }}/rest/workspaces/fossgis
* Server Noelios-Restlet-Engine/1.0..8 is not blacklisted
&lt; Server: Noelios-Restlet-Engine/1.0..8
&lt; Transfer-Encoding: chunked
&lt;
* Connection #0 to host localhost left intact
</code></pre>
<p>An dieser Stelle sind zwei Informationen f&#xFC;r uns entscheidend:</p>
<ol>
<li><code>HTTP/1.1 201 Created</code>: Der Aufruf wurde erfolgreich bearbeitet und die
 Ressource erstellt.</li>
<li><code>http://localhost/geoserver/rest/workspaces/fossgis</code>: Die (eindeutige) URL
 unseres neuen Arbeitsbereichs.</li>
</ol>
<p>Wir k&#xF6;nnen nun &#xFC;berpr&#xFC;fen, ob der Arbeitsbereich tats&#xE4;chlich angelegt wurde, indem wir</p>
<ul>
<li><em>klassisch</em> die <a href="http://localhost/geoserver" target="_blank">GeoServer GUI</a> &#xF6;ffnen und dort &#xFC;ber den
  Men&#xFC;eintrag <code>Arbeitsbereiche</code> alle vorhandenen Arbeitsbereiche auflisten oder</li>
<li><em>&#xFC;ber die REST-API</em> eine Auflistung aller Arbeitsbereiche anfordern (im <code>XML</code>-Format):</li>
</ul>
<pre><code class="lang-bash">curl \
  -v \
  -u admin:geoserver \
  -XGET \
  -H <span class="hljs-string">&quot;Accept: text/xml&quot;</span> \
   {{ book.geoServerBaseUrl }}/rest/workspaces
</code></pre>
<p>In beiden F&#xE4;llen werden wir erkennen, dass ein neuer Arbeitsbereich namens
fossgis vorhanden ist.</p>
<h2 id="datenspeicher-erstellen">Datenspeicher erstellen</h2>
<p>Nachdem wir einen neuen Arbeitsbereich erstellt haben, werden wir diesem einen neuen
Datenspeicher hinzuf&#xFC;gen. Der folgende Befehl erzeugt (Operation <code>POST</code>!) einen
neuen PostGIS Datenspeicher (<code>dbtype</code>) mit den Namen natural_earth und den
folgenden DB-Verbindungsparametern:</p>
<ul>
<li><strong>Hostadresse</strong>: localhost (<code>host</code>)</li>
<li><strong>Hostport</strong>: 5432 (<code>port</code>)</li>
<li><strong>Datenbankname</strong>: natural_earth2 (<code>database</code>)</li>
<li><strong>Benutzer</strong>: user (<code>user</code>)</li>
<li><strong>Passwort</strong>: user (<code>passwd</code>)</li>
</ul>
<pre><code class="lang-bash">curl \
  -v \
  -u admin:geoserver \
  -XPOST \
  -H <span class="hljs-string">&quot;Content-type: text/xml&quot;</span> \
  <span class="hljs-operator">-d</span> <span class="hljs-string">&quot;&lt;dataStore&gt;
      &lt;name&gt;natural_earth&lt;/name&gt;
      &lt;connectionParameters&gt;
        &lt;host&gt;localhost&lt;/host&gt;
        &lt;port&gt;5432&lt;/port&gt;
        &lt;database&gt;natural_earth2&lt;/database&gt;
        &lt;user&gt;user&lt;/user&gt;
        &lt;passwd&gt;user&lt;/passwd&gt;
        &lt;dbtype&gt;postgis&lt;/dbtype&gt;
      &lt;/connectionParameters&gt;
      &lt;/dataStore&gt;&quot;</span> \
   {{ book.geoServerBaseUrl }}/rest/workspaces/fossgis/datastores
</code></pre>
<blockquote class="clearfix alert alert-info"><strong class="fa fa-4x fa-edit"></strong>
<p></p>
<p>Die hier genutzte Datenbank <em>natural_earth2</em> ist auf der OSGeoLive vorinstalliert
und entstammt dem Natural Earth Projekt. Weiterf&#xFC;hrende Informationen zum Datensatz
sowie die Daten selbst finden Sie unter <a href="http://www.naturalearthdata.com/" target="_blank">http://www.naturalearthdata.com/</a>.</p>
</blockquote>
<p>Die erfolgreiche Anlage des Datenspeichers wird uns erneut &#xFC;ber den Statuscode
<code>HTTP/1.1 201 Created</code> best&#xE4;tigt und kann wiederum &#xFC;ber die <a href="http://localhost/geoserver" target="_blank">GUI</a>
oder das Auslesen &#xFC;ber die API kontrolliert werden:</p>
<pre><code class="lang-bash">curl \
  -v \
  -u admin:geoserver \
  -XGET \
  -H <span class="hljs-string">&quot;Accept: text/xml&quot;</span> \
  {{ book.geoServerBaseUrl }}/rest/workspaces/fossgis/datastores/natural_earth.xml
</code></pre>
<p>Die Antwort sollte wie folgt aussehen:</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">dataStore</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>natural_earth<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>PostGIS<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">enabled</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">enabled</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">workspace</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>fossgis<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">atom:link</span> <span class="hljs-attribute">xmlns:atom</span>=<span class="hljs-value">&quot;http://www.w3.org/2005/Atom&quot;</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">&quot;alternate&quot;</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">&quot;@geoserver_url@/rest/workspaces/fossgis.xml&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;application/xml&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">workspace</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">connectionParameters</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">&quot;port&quot;</span>&gt;</span>5432<span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">&quot;passwd&quot;</span>&gt;</span>crypt1:36+tgAgu2EC0mGyPR7MNkQ==<span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">&quot;dbtype&quot;</span>&gt;</span>postgis<span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">&quot;host&quot;</span>&gt;</span>localhost<span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">&quot;user&quot;</span>&gt;</span>user<span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">&quot;database&quot;</span>&gt;</span>natural_earth2<span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">&quot;namespace&quot;</span>&gt;</span>http://fossgis<span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">connectionParameters</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">__default</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">__default</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">featureTypes</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">atom:link</span> <span class="hljs-attribute">xmlns:atom</span>=<span class="hljs-value">&quot;http://www.w3.org/2005/Atom&quot;</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">&quot;alternate&quot;</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">&quot;@geoserver_url@/rest/workspaces/fossgis/datastores/natural_earth/featuretypes.xml&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;application/xml&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">featureTypes</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dataStore</span>&gt;</span>
</code></pre>
<h2 id="stil-erstellen-und-hochladen">Stil erstellen und hochladen</h2>
<p>Nachdem Arbeitsbereich und Datenspeicher angelegt wurden, k&#xF6;nnen wir im n&#xE4;chsten
Schritt einen neuen Stil mit dem Namen <code>states_provinces</code> im Arbeitsbereich <code>fossgis</code>
anlegen, der die Stildatei (SLD, <em>Styled Layer Descriptor</em>) <code>states_provinces.sld</code>
assoziiert. F&#xFC;hren Sie dazu zun&#xE4;chst den folgenden Befehl aus:</p>
<pre><code class="lang-bash">curl \
  -v \
  -u admin:geoserver \
  -XPOST \
  -H <span class="hljs-string">&quot;Content-type: text/xml&quot;</span> \
  <span class="hljs-operator">-d</span> <span class="hljs-string">&quot;&lt;style&gt;
        &lt;name&gt;states_provinces&lt;/name&gt;
        &lt;filename&gt;states_provinces.sld&lt;/filename&gt;
      &lt;/style&gt;&quot;</span> \
  {{ book.geoServerBaseUrl }}/rest/workspaces/fossgis/styles
</code></pre>
<p>Erneut wird uns die erfolgreiche Anlage mit dem Status <code>HTTP/1.1 201 Created</code>
best&#xE4;tigt und wir pr&#xFC;fen dies wiederum &#xFC;ber die <a href="http://localhost/geoserver" target="_blank">GUI</a></p>
<p>Nachdem die Ressource im GeoServer publiziert wurde, k&#xF6;nnen wir &#xFC;ber REST den Stil
selbst (<em>states_provinces.sld</em>) an die Ressource binden. Hierzu k&#xF6;nnen wir die
HTTP-Operation <code>PUT</code> nutzen, um eine Datei auf den Server zu kopieren:</p>
<pre><code class="lang-bash">curl \
  -v \
  -u admin:geoserver \
  -XPUT \
  -H <span class="hljs-string">&quot;Content-type: application/vnd.ogc.sld+xml&quot;</span> \
  <span class="hljs-operator">-d</span> @states_provinces.sld \
  {{ book.geoServerBaseUrl }}/rest/workspaces/fossgis/styles/states_provinces
</code></pre>
<p><strong>Wichtig:</strong> Der obige Befehl setzt zwei Dinge voraus:</p>
<ol>
<li>Es existiert eine SLD-Datei mit dem Namen <em>states_provinces.sld</em> und einem
 validen SLD Inhalt. Die entsprechende Datei kann hier \&lt;./files/states_provinces.sld&gt;
 heruntergeladen werden.</li>
<li>Der Pfad zur Datei <em>states_provinces.sld</em> ist korrekt. Im obigen Beispiel
 liegt die Datei im gleichen Ordner aus dem cURL aufgerufen wurde. Wechseln Sie
 also ggf. im Terminal zum Ordner der Datei oder passen Sie den cURL-Aufruf an.</li>
</ol>
<p>War der Befehl erfolgreich, enth&#xE4;lt die Antwort im Terminal den Teilstring <code>&amp;lt; HTTP/1.1 200 OK</code>.</p>
<h2 id="layer-anlegen">Layer anlegen</h2>
<p>Der n&#xE4;chste logische Schritt ist das Anlegen eines Layers auf Basis einer Geometrietabelle
aus unserem neuen Datenspeichers natural_earth. Als Beispiel werden wir die Tabelle
<em>ne_10m_admin_1_states_provinces_shp</em> mit dem folgenden Befehl im Arbeitsbereich
fossgis ver&#xF6;ffentlichen:</p>
<pre><code class="lang-bash">curl \
  -v \
  -u admin:geoserver \
  -XPOST \
  -H <span class="hljs-string">&quot;Content-type: text/xml&quot;</span> \
  <span class="hljs-operator">-d</span> <span class="hljs-string">&quot;&lt;featureType&gt;
        &lt;name&gt;states_provinces&lt;/name&gt;
        &lt;nativeName&gt;ne_10m_admin_1_states_provinces_shp&lt;/nativeName&gt;
        &lt;nativeCRS&gt;EPSG:4326&lt;/nativeCRS&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/featureType&gt;&quot;</span> \
  {{ book.geoServerBaseUrl }}/rest/workspaces/fossgis/datastores/natural_earth/featuretypes
</code></pre>
<p>Und erneut begr&#xFC;&#xDF;t uns nach erfolgreichem Hinzuf&#xFC;gen der Ressource die Statusmeldung
<code>HTTP/1.1 201 Created</code> und selbstverst&#xE4;ndlich k&#xF6;nnen wir an dieser Stelle erneut das
Ergebnis &#xFC;ber die <a href="http://localhost/geoserver" target="_blank">GUI</a> oder die REST-API begutachten:</p>
<pre><code class="lang-bash">curl \
  -v \
  -u admin:geoserver \
  -XGET \
  {{ book.geoServerBaseUrl }}/rest/workspaces/fossgis/datastores/natural_earth/featuretypes/states_provinces.xml
</code></pre>
<p>Die XML-Repr&#xE4;sentation des Layers ist demnach wie folgt (gek&#xFC;rzt):</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">featureType</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>states_provinces<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">nativeName</span>&gt;</span>ne_10m_admin_1_states_provinces_shp<span class="hljs-tag">&lt;/<span class="hljs-title">nativeName</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">namespace</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>fossgis<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">atom:link</span> <span class="hljs-attribute">xmlns:atom</span>=<span class="hljs-value">&quot;http://www.w3.org/2005/Atom&quot;</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">&quot;alternate&quot;</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">&quot;@geoserver_url@/rest/namespaces/fossgis.xml&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;application/xml&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">namespace</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>ne_10m_admin_1_states_provinces_shp<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">keywords</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>ne_10m_admin_1_states_provinces_shp<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>features<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">keywords</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">nativeCRS</span>&gt;</span>
    GEOGCS[&quot;WGS 84&quot;,
       DATUM[&quot;World Geodetic System 1984&quot;,
       SPHEROID[&quot;WGS 84&quot;, 6378137.0, 298.257223563, AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],
       AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]
     ],
     PRIMEM[&quot;Greenwich&quot;, 0.0, AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],
     UNIT[&quot;degree&quot;, 0.017453292519943295],
     AXIS[&quot;Geodetic longitude&quot;, EAST],
     AXIS[&quot;Geodetic latitude&quot;, NORTH],
     AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]
  <span class="hljs-tag">&lt;/<span class="hljs-title">nativeCRS</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">srs</span>&gt;</span>EPSG:4326<span class="hljs-tag">&lt;/<span class="hljs-title">srs</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">nativeBoundingBox</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">minx</span>&gt;</span>-181.800003051758<span class="hljs-tag">&lt;/<span class="hljs-title">minx</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">maxx</span>&gt;</span>181.800018310547<span class="hljs-tag">&lt;/<span class="hljs-title">maxx</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">miny</span>&gt;</span>-60.1882858276367<span class="hljs-tag">&lt;/<span class="hljs-title">miny</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">maxy</span>&gt;</span>84.3496398925781<span class="hljs-tag">&lt;/<span class="hljs-title">maxy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">crs</span>&gt;</span>EPSG:4326<span class="hljs-tag">&lt;/<span class="hljs-title">crs</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">nativeBoundingBox</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">latLonBoundingBox</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">minx</span>&gt;</span>-181.800003051758<span class="hljs-tag">&lt;/<span class="hljs-title">minx</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">maxx</span>&gt;</span>181.800018310547<span class="hljs-tag">&lt;/<span class="hljs-title">maxx</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">miny</span>&gt;</span>-60.1882858276367<span class="hljs-tag">&lt;/<span class="hljs-title">miny</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">maxy</span>&gt;</span>84.3496398925781<span class="hljs-tag">&lt;/<span class="hljs-title">maxy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">crs</span>&gt;</span>GEOGCS[&amp;quot;WGS84(DD)&amp;quot;,
   DATUM[&amp;quot;WGS84&amp;quot;,
     SPHEROID[&amp;quot;WGS84&amp;quot;, 6378137.0, 298.257223563]],
   PRIMEM[&amp;quot;Greenwich&amp;quot;, 0.0],
   UNIT[&amp;quot;degree&amp;quot;, 0.017453292519943295],
   AXIS[&amp;quot;Geodetic longitude&amp;quot;, EAST],
   AXIS[&amp;quot;Geodetic latitude&amp;quot;, NORTH]]<span class="hljs-tag">&lt;/<span class="hljs-title">crs</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">latLonBoundingBox</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">projectionPolicy</span>&gt;</span>FORCE_DECLARED<span class="hljs-tag">&lt;/<span class="hljs-title">projectionPolicy</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">enabled</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">enabled</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">store</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">&quot;dataStore&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>natural_earth<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">atom:link</span> <span class="hljs-attribute">xmlns:atom</span>=<span class="hljs-value">&quot;http://www.w3.org/2005/Atom&quot;</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">&quot;alternate&quot;</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">&quot;@geoserver_url@/rest/workspaces/fossgis/datastores/natural_earth.xml&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;application/xml&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">store</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">maxFeatures</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">maxFeatures</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">numDecimals</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">numDecimals</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">overridingServiceSRS</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">overridingServiceSRS</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">circularArcPresent</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">circularArcPresent</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">attributes</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">attribute</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>adm1_code<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">minOccurs</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">minOccurs</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">maxOccurs</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">maxOccurs</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">nillable</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">nillable</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">binding</span>&gt;</span>java.lang.String<span class="hljs-tag">&lt;/<span class="hljs-title">binding</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">attribute</span>&gt;</span>

     (...)

    <span class="hljs-tag">&lt;<span class="hljs-title">attribute</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>the_geom<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">minOccurs</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">minOccurs</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">maxOccurs</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">maxOccurs</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">nillable</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">nillable</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">binding</span>&gt;</span>com.vividsolutions.jts.geom.MultiPolygon<span class="hljs-tag">&lt;/<span class="hljs-title">binding</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">attribute</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">attributes</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">featureType</span>&gt;</span>
</code></pre>
<p>Bereits zu diesem Zeitpunkt k&#xF6;nnen wir den Layer &#xFC;ber die Layervorschau des GeoServers
oder &#xFC;ber einen beliebigen Client (z.B. QGIS) aufrufen. &#xD6;ffnen Sie hierzu die
<a href="http://localhost/geoserver" target="_blank">Weboberfl&#xE4;che</a> vom GeoServer und rufen Sie dort die Layervorschau
(<img src="../assets/gui1.png" alt="layer\_preview\_icon">) auf. &#xD6;ffnen Sie dort den Layer in der interaktiven
Vorschau durch einen Klick auf OpenLayers (<img src="../assets/gui2.png" alt="openlayers\_icon">). Die
Startansicht der Vorschau sollte dabei in etwa der folgenden Abbildung entsprechen.</p>
<figure id="fig3.2.1"><img src="../assets/create1.png" alt="Hallo Welt!"><figcaption>Hallo Welt!</figcaption></figure>
<h2 id="layerstil-zuordnen">Layerstil zuordnen</h2>
<p>Vergessen wir jedoch nicht unseren Layerstil states_provinces aus den vorherigen
Kapiteln, den wir im Folgenden dem Layer states_provinces zuweisen wollen:</p>
<pre><code class="lang-bash">curl \
  -v \
  -u admin:geoserver \
  -XPUT \
  -H <span class="hljs-string">&quot;Content-type: text/xml&quot;</span> \
  <span class="hljs-operator">-d</span> <span class="hljs-string">&quot;&lt;layer&gt;
        &lt;defaultStyle&gt;
          &lt;name&gt;states_provinces&lt;/name&gt;
          &lt;workspace&gt;fossgis&lt;/workspace&gt;
        &lt;/defaultStyle&gt;
      &lt;/layer&gt;&quot;</span> \
  {{ book.geoServerBaseUrl }}/rest/layers/fossgis:states_provinces
</code></pre>
<p>Best&#xE4;tigt durch den Status <code>HTTP/1.1 200 OK</code> k&#xF6;nnen wir die Layervorschau erneut
aufrufen und werden sehen, dass der neue Stil (hellgraue Landesfl&#xE4;chen, dunkelgraue
Landesgrenzen und Beschriftung) dem Layer zugeordnet wurde:</p>
<figure id="fig3.2.2"><img src="../assets/create2.png" alt="Layer states\_provinces mit zugeh&#xF6;rigem Stil und zentriert auf Nordrhein-Westfalen"><figcaption>Layer states\_provinces mit zugeh&#xF6;rigem Stil und zentriert auf Nordrhein-Westfalen</figcaption></figure>
<p>Herzlichen Gl&#xFC;ckwunsch! Sie haben mit nur wenigen Befehlen im Terminal einen Layer
im GeoServer angelegt!</p>
<p>Lernen wir nun im <a href="edit.html">n&#xE4;chsten Kapitel</a> das Editieren von Katalogkonfigurationen.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../rest/read.html" class="navigation navigation-prev " aria-label="Previous page: Katalog auslesen"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../rest/edit.html" class="navigation navigation-next " aria-label="Next page: Katalogeinträge editieren"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-exercises-tmp-fixed-6/ace/ace.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-exercises-tmp-fixed-6/ace/theme-tomorrow.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-exercises-tmp-fixed-6/ace/mode-javascript.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-exercises-tmp-fixed-6/exercises.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
    

    
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sectionx/sectionx.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/terrestris/geoserver-in-action-ws/edit/master/src","label":"Edit…"},"image-captions":{"caption":"_CAPTION_","variable_name":"_pictures"},"richquotes":{"task":{"alert":"info","picto":"fa-file-code-o"},"exercise":{"alert":"info","picto":"fa-file-code-o"}},"advanced-emoji":{"embedEmojis":false},"exercises-tmp-fixed-6":{},"expandable-chapters":{},"include-codeblock":{},"sectionx":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
